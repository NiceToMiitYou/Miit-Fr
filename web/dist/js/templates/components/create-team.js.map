{"version":3,"sources":["components/create-team.jsx"],"names":[],"mappings":"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","file":"components/create-team.js","sourcesContent":["MiitComponents.CreateTeam = React.createClass({\n\n    getInitialState: function() {\n\n        return {\n            placeholder: {\n                email: MiitTranslator.get('placeholder.your.email', 'inputs'),\n                team:  MiitTranslator.get('placeholder.team.name', 'inputs')\n            },\n            submit: MiitTranslator.get('submit.create.team', 'inputs'),\n            errors: this.getDefaultErrors()\n        }\n    },\n\n    getDefaultErrors: function() {\n        return {\n            missing_email: false,\n            missing_team:  false,\n            missing_terms: false,\n            invalid_email: false,\n            invalid_team:  false\n        };\n    },\n\n    handleSubmit: function(e) {\n        e.preventDefault();\n\n        var email = React.findDOMNode(this.refs.email).value.trim();\n        var team  = React.findDOMNode(this.refs.team).value.trim();\n        var terms = React.findDOMNode(this.refs.terms).checked;\n        \n        // Check if there is data\n        if (!email || !team || !terms) {\n            this.setState({ errors: {\n                missing_email: !email,\n                missing_team:  !team,\n                missing_terms: !terms\n            }});\n            return;\n        }\n\n        // Check if this is a correct email\n        if(!MiitUtils.validator.email(email)) {\n            this.setState({ errors: {\n                invalid_email: true\n            }});\n            return;\n        }\n\n        // Check if this is a correct team name\n        if(!MiitUtils.validator.team(team)) {\n            this.setState({ errors: {\n                invalid_team: true\n            }});\n            return;\n        }\n\n        this.setState({\n            errors: this.getDefaultErrors()\n        });\n\n        // Request for CRSF\n        MiitUtils.ajax.crsf('registration', function(token) {\n\n            // Register the user\n            MiitUtils.ajax.send('/register', {\n                'registration_type[user][email]': email,\n                'registration_type[team][name]':  team,\n                'registration_type[terms]':       terms,\n                'registration_type[_token]':      token\n            }, function(data) {\n                console.log(data);    \n            });\n        });\n\n        return;\n    },\n\n    render: function() {\n        var cx = React.addons.classSet;\n\n        var classes_email = cx({\n            'invalid': this.state.errors.missing_email ||\n                       this.state.errors.invalid_email\n        });\n\n        var classes_team = cx({\n            'invalid':  this.state.errors.missing_team ||\n                        this.state.errors.invalid_team\n        });\n\n        var classes_terms = cx({\n            'invalid': this.state.errors.missing_terms\n        });\n\n        return (\n            <form class=\"miit-component create-team\" onSubmit={this.handleSubmit}>\n                <div>\n                    <input type=\"text\" className={classes_email} placeholder={this.state.placeholder.email} ref=\"email\" />\n                    <input type=\"text\" className={classes_team}  placeholder={this.state.placeholder.team}  ref=\"team\" />\n                    <input type=\"checkbox\" className={classes_terms} ref=\"terms\" />\n                    <input type=\"submit\" value={this.state.submit} />\n                </div>\n            </form>\n        );\n    }\n});"],"sourceRoot":"/source/"}