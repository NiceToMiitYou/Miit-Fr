!function(e){window.MiitComponents={},window.MiitApp=function(){var e="0.0.0";return{VERSION:e,request:{}}}(),MiitApp.request.user=function(){"use strict";var e={};return e.change_password=function(e,t,a){MiitApp.utils.ajax.crsf("change_password",function(l){MiitApp.utils.ajax.send("/app/user/change_password",{password_old:e,password_new:{first:t,second:t},_token:l},a)})},e.promote=function(e,t,a){MiitApp.utils.ajax.crsf("promote_user",function(l){MiitApp.utils.ajax.send("/app/user/promote/"+e,{roles:t,_token:l},a)})},e.registration=function(e,t,a){MiitApp.utils.ajax.crsf("registration",function(l){MiitApp.utils.ajax.send("/register",{user:{email:e},team:{name:t},terms:!0,_token:l},a)})},e}(),MiitApp.utils=function(){"use strict";function e(){for(var e=!1,t=0;t<n.length;t++){try{e=n[t]()}catch(a){continue}break}return e}var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,a=/^[a-z0-9]{4,}$/i,l=/^.{6,32}$/,i=function(e){return function(t){return e.test(t)}},n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],s=function(t,a,l){var i=e();if(i){"function"==typeof a&&(l=a,a=null);var n=a?"POST":"GET";i.open(n,t,!0),a&&i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){if(4==i.readyState&&(200==i.status||304==i.status)){var e;try{e=JSON.parse(i.responseText)}catch(t){}"function"==typeof l&&l(e)}},4!=i.readyState&&i.send(JSON.stringify(a))}},r=function(e,t){"function"==typeof e&&(t=e,e=null);var a="/_crsftoken/"+(e||"");s(a,function(e){e&&e.token&&"function"==typeof t&&t(e.token)})};return{ajax:{send:s,crsf:r},validator:{email:i(t),password:i(l),team:i(a)}}}(),MiitComponents.TeamApp=e.createClass({displayName:"TeamApp",render:function(){return e.createElement("div",{className:"page bg-grey lighten-5"},e.createElement(MiitComponents.MenuTeam,null),e.createElement(t,null),e.createElement("div",{className:"main"},e.createElement(MiitComponents.MiitTeamHeader,null),e.createElement(MiitComponents.MiitTeamContent,null)))}});var t=e.createClass({displayName:"ChangePassword",getDefaultProps:function(){return{placeholder:{old:MiitTranslator.get("placeholder.your.password","inputs"),first:MiitTranslator.get("placeholder.password.first","inputs"),second:MiitTranslator.get("placeholder.password.second","inputs")},submit:MiitTranslator.get("submit.change.password","inputs")}},getInitialState:function(){var e=this.getDefaultErrors();return e.value_old="",e.value_first="",e.value_second="",e},getDefaultErrors:function(){return{missing_old:!1,missing_first:!1,missing_second:!1,invalid_old:!1,invalid_same:!1,invalid_repeated:!1,invalid_format:!1}},handleChange:function(e){if(e.target&&e.target.name){var t={},a="value_"+e.target.name,l=e.target.value||"";t[a]=l,this.setState(t)}},handleSubmit:function(e){e.preventDefault();var t=this.state.value_old,a=this.state.value_first,l=this.state.value_second;return this.setState(this.getDefaultErrors()),t&&a&&l?a!==l?void this.setState({invalid_repeated:!0}):a===t?void this.setState({invalid_same:!0}):MiitApp.utils.validator.password(a)?void MiitApp.request.user.change_password(t,a,function(){this.setState({value_old:"",value_first:"",value_second:""})}.bind(this)):void this.setState({invalid_format:!0}):void this.setState({missing_old:!t,missing_first:!a,missing_second:!l})},render:function(){var t=e.addons.classSet,a=this.state.value_old,l=t({invalid:this.state.missing_old||this.state.invalid_old}),i=this.state.value_first,n=t({invalid:this.state.missing_first||this.state.invalid_same||this.state.invalid_format}),s=this.state.value_second,r=t({invalid:this.state.missing_second||this.state.invalid_repeated});return e.createElement("form",{className:"miit-component change-password",onSubmit:this.handleSubmit},e.createElement("div",null,e.createElement("input",{type:"password",className:l,value:a,placeholder:this.props.placeholder.old,onChange:this.handleChange,name:"old"}),e.createElement("input",{type:"password",className:n,value:i,placeholder:this.props.placeholder.first,onChange:this.handleChange,name:"first"}),e.createElement("input",{type:"password",className:r,value:s,placeholder:this.props.placeholder.second,onChange:this.handleChange,name:"second"}),e.createElement("input",{type:"submit",value:this.props.submit})))}});MiitComponents.MenuTeam=e.createClass({displayName:"MenuTeam",render:function(){return e.createElement("div",{className:"sidr-left bg-blue-grey"},e.createElement("div",{className:"sl-wrapper"},e.createElement("a",{className:"sl-header bg-blue-grey darken-1"},e.createElement("i",{className:"fa fa-bars pull-left"}),"Menu",e.createElement("i",{className:"fa fa-angle-down pull-right"})),e.createElement("span",{className:"sl-label"},e.createElement("i",{className:"mdi-action-favorite pull-left"})," Favorites"),e.createElement("ul",{className:"sl-list"},e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-weixin pull-left"}),"Chat miit")),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-question pull-left"}),"Quizz : Que pensez-vous..."))),e.createElement("span",{className:"sl-label"},e.createElement("i",{className:"fa fa-map-marker pull-left"})," Miits"),e.createElement("ul",{className:"sl-list"},e.createElement("li",null,e.createElement("a",{className:"active"},e.createElement("i",{className:"fa fa-circle-thin pull-left stat-open"})," Miit ouvert")),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-circle-thin pull-left stat-ready"})," Miit prêt")),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-circle-thin pull-left stat-config"})," Miit en configuration")),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-plus pull-left"})," Créer un Miit"))),e.createElement("a",{className:"sl-footer"},e.createElement("div",{className:"avatar border-circle"},e.createElement("img",{src:"http://www.mangashare.com/forums/customavatars/avatar68124_1.gif"})),e.createElement("span",null,"John Random",e.createElement("i",{className:"fa fa-angle-up pull-right"})))))}}),MiitComponents.MiitTeamContent=e.createClass({displayName:"MiitTeamContent",render:function(){return e.createElement("div",{className:"page-content page-dashboard"},e.createElement("div",{className:"container"},e.createElement("h1",{className:"mb30"},"Dashboard"),e.createElement("h2",null,"Configuration"),e.createElement("h3",{className:"mt30 mb30"},e.createElement("i",{className:"fa fa-lock pull-left "})," Confidentialité"),e.createElement("div",{className:"mb20"},e.createElement("div",{className:"checkbox-field mb20"},e.createElement("label",null,e.createElement("input",{type:"radio",name:"confid",className:"option-input radio",defaultChecked:!0}),"Publique")),e.createElement("p",{className:"mb10"},"Votre Miit est publique et accessible a tout le monde via l URL :"),e.createElement("div",{className:"input-field pure-u-sm-1-3 mb20"},e.createElement("input",{value:"https://sncf.miit.fr/XBM56T",type:"text",disabled:!0}))),e.createElement("div",{className:"checkbox-field mb20"},e.createElement("label",null,e.createElement("input",{type:"radio",name:"confid",className:"option-input radio"}),"Privé")),e.createElement("p",{className:"mb10"},"Votre Miit est privé et ne sera accessible qu aux personnes de votre choix"),e.createElement("div",{className:"input-field pure-u-sm-1-3"},e.createElement("i",{className:"fa fa-user-plus"}),e.createElement("input",{placeholder:"Ajoutez une personne ou un cercle",type:"text"})),e.createElement("h3",{className:"mt30 mb30"},e.createElement("i",{className:"fa fa-info pull-left "})," Informations"),e.createElement("div",{className:"input-field pure-u-sm-1-2 mb30"},e.createElement("label",null,"Titre"),e.createElement("input",{placeholder:"Titre",id:"title",type:"text",value:"Miit ouvert"})),e.createElement("div",{className:"input-field pure-u-sm-2-3"},e.createElement("label",null,"Description"),e.createElement("textarea",{placeholder:"Description",rows:"6"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. ")),e.createElement("h3",{className:"mt30"},e.createElement("i",{className:"fa fa-circle-thin pull-left stat-open"})," Status"),e.createElement("p",{className:"mt30 mb30"},e.createElement("i",{className:"fa fa-info pull-left"})," Votre Miit est ouvert est prêt à être utilisé"),e.createElement("button",{className:"btn mr20"},"Ouvert"),e.createElement("button",{className:"btn btn-warning mr20"},"Fermer"),e.createElement("button",{className:"btn btn-danger mr20"},"Supprimer"),e.createElement("h2",{className:"mt30"},"Applications")),e.createElement("ul",{className:"app-list"},e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-weixin bg-blue"}),e.createElement("span",null,"Chat"))),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-question bg-green"}),e.createElement("span",null,"Quizz"))),e.createElement("li",null,e.createElement("a",{className:"add-app"},e.createElement("i",{className:"fa fa-plus bg-blue-grey"}),e.createElement("span",null,"Ajouter une App")))))}}),MiitComponents.MiitTeamHeader=e.createClass({displayName:"MiitTeamHeader",render:function(){return e.createElement("div",{className:"page-header z-depth-1"},e.createElement("h1",null,e.createElement("i",{className:"fa fa-circle-thin pull-left stat-open"})," Miit ouvert ",e.createElement("a",{className:"ph-title"},e.createElement("i",{className:"fa fa-cog pull-right"}))),e.createElement("ul",{className:"ph-btn-list"},e.createElement("li",{className:"active"},e.createElement("a",null,e.createElement("i",{className:"fa fa-question pull-left"}),"Quizz ",e.createElement("span",null,"Que pensez-vous de...")," ",e.createElement("i",{className:"fa fa-times pull-right"}))),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-weixin"}),"Chat",e.createElement("i",{className:"fa fa-times pull-right"}))),e.createElement("li",null,e.createElement("a",null,e.createElement("i",{className:"fa fa-plus pull-left"})," Ajouter"))))}}),MiitComponents.CreateTeam=e.createClass({displayName:"CreateTeam",getDefaultProps:function(){return{placeholder:{email:MiitTranslator.get("placeholder.your.email","inputs"),team:MiitTranslator.get("placeholder.team.name","inputs")},submit:MiitTranslator.get("submit.create.team","inputs")}},getInitialState:function(){return this.getDefaultErrors()},getDefaultErrors:function(){return{missing_email:!1,missing_team:!1,missing_terms:!1,invalid_email:!1,invalid_team:!1}},handleSubmit:function(t){t.preventDefault();var a=e.findDOMNode(this.refs.email).value.trim(),l=e.findDOMNode(this.refs.team).value.trim(),i=e.findDOMNode(this.refs.terms).checked;return this.setState(this.getDefaultErrors()),a&&l&&i?MiitApp.utils.validator.email(a)?MiitApp.utils.validator.team(l)?void MiitApp.request.user.registration(a,l,function(e){console.log(e)}):void this.setState({invalid_team:!0}):void this.setState({invalid_email:!0}):void this.setState({missing_email:!a,missing_team:!l,missing_terms:!i})},render:function(){var t=e.addons.classSet,a=t({invalid:this.state.missing_email||this.state.invalid_email}),l=t({invalid:this.state.missing_team||this.state.invalid_team}),i=t({invalid:this.state.missing_terms});return e.createElement("form",{className:"miit-component create-team",onSubmit:this.handleSubmit},e.createElement("div",null,e.createElement("input",{type:"text",className:a,placeholder:this.props.placeholder.email,ref:"email"}),e.createElement("input",{type:"text",className:l,placeholder:this.props.placeholder.team,ref:"team"}),e.createElement("input",{type:"checkbox",className:i,ref:"terms"}),e.createElement("input",{type:"submit",value:this.props.submit})))}})}(React);
//# sourceMappingURL=app.min.js.map